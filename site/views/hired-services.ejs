<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include ("./partials/head.ejs")  %>
</head>
<body class="">
  <header>
    <%- include ("./partials/header-nav.ejs") %>
</header>
    <section class="fg">
      <section class="w-100 p-0 m-0">
        <div class="row h100">
          <%- include ("./partials/account-header.ejs") %>

              <section class=" col-md-9 col-xxl-9 col-xl-9 d-flex wrap just">
                <% for(let i = 0; i < solicitudesConfirmadas.length; i++){%>

                  <article class="card-p container-fluid d-flex just">
                    <div class="  row">
                      <div class="card mb-3 col">
                        <div class="row">
                          <div class="p-0 col-md-3 w">
              
                            
                             <img src="/images/avatars/<%= solicitudesConfirmadas[i].service.user.profilePicture %> " class="img-fluid rounded-start h-100" alt="foto de servicio">
                            
              
                            
                            </div>
                            
                          <div class="col-md-9">
                            <div class="card-body p-1 m-0 jus">
                              <h5 class="card-title d-flex just border-b"><%= solicitudesConfirmadas[i].service.user.fullname %> </h5>
                            
                              <div class="pofessions d-flex wrap border-b">
                              <ul>
                                <li class=" list-style mr-10"><span class="m-0" >Servicio de: <%= solicitudesConfirmadas[i].service.category.name %> </span></li>
                              </ul>
                            </div>
                            <p class="card-text "><%= solicitudesConfirmadas[i].service.jobDescription %> </p>
                            <p class="fst-italic gray-light border-b border-t"> Precios de referencia: $<%= solicitudesConfirmadas[i].service.price %> </p>
                            <div class="d-flex just">
                                <button type="button" class="btn btn-danger mb-2" data-bs-toggle="modal" data-bs-target="#staticBackdrop-<%=solicitudesConfirmadas[i].id  %> ">
                                    Dejar reseña
                                  </button>
                                  
                                  <!-- Modal -->
                                  <div class="modal fade" id="staticBackdrop-<%=solicitudesConfirmadas[i].id%>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <h5 class="modal-title" id="staticBackdropLabel">Deje su reseña aqui</h5>
                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                          <form class="p-15 form-outline formulario" method="POST" action="/user/review-service/<%=solicitudesConfirmadas[i].service.id%>">
                                            <div class="p-2">
                                              <label> Satisfaccion del 1 al 10: </label>
                                              <input type="number" min="0" max="10" name="satisfactionReview" class="satisfactionReview" >
                                              <span class="error text-danger">
                                                <% if (locals.errors && errors.satisfactionReview) { %>
                                                  <%= errors.satisfactionReview.msg %>
                                                <% } %>
                                              </span>
                                            </div>
                                            <div class="p-2">
                                                <label for="floatingTextarea">Escriba un breve comentario...</label>
                                                <textarea class="form-control commentReview" id="floatingTextarea" name="commentReview"></textarea>
                                                <span class="error text-danger">
                                                  <% if (locals.errors && errors.commentReview) { %>
                                                    <%= errors.commentReview.msg %>
                                                  <% } %>
                                                </span>
                                            </div>
                                            <div class="modal-footer">
                                              <button type="submit" class="btn btn-danger">Enviar</button>
                                            </div>
                                          </form>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  </article>
                  
                  <% }; %> 
                
                </section>
              
        
      </section>
    </section>
        
    <footer class="bg-dark text-center text-white">
      <%- include ("./partials/footer.ejs")  %>
    </footer>
    <script src="/js/reviewServiceScript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
        </body>
      </html>