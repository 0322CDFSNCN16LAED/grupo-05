<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include ("./partials/head.ejs")  %>
</head>
<body class="">
  <header>
    <%- include ("./partials/header-nav.ejs") %>
</header>
    <section class="container p-15  text-ceter">
      <div class="d-flex justify-content-center ">
        <h3 class="m-20">Registrate</h3>
      </div>

      <form class="p-15 form-outline " method="POST" action="/auth/register" enctype="multipart/form-data" id="formRegister">
        <div class="row mb-4 ">
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Nombre completo:</b></label>
              <input type="text" name="fullname" class="form-control fullname <%= locals.errors && errors.fullname ? "is-invalid" : null %>" 
                value="<%= locals.oldData && oldData.fullname ? oldData.fullname : null %>">
            <span class="error text-danger">
              <% if (locals.errors && errors.fullname) { %>
                 <%= errors.fullname.msg %>
              <% } %>
            </span>
            </div>
          </div>
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Email:</b></label>
              <input 
                type="text" 
                name="email" 
                class="form-control email <%= locals.errors && errors.email ? "is-invalid" : null %>"
                value="<%= locals.oldData && oldData.email ? oldData.email : null %>">  
                  <span class="error text-danger">    
                       <% if (locals.errors && errors.email) { %>
                            <%= errors.email.msg %>             
                       <% } %>
                       </span>
            </div>
            </div>
          </div>

          <div class="row mb-4 ">
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Telefono</b></label>
              <input type="tel" name="phone" class="form-control phone <%= locals.errors && errors.phone ? "is-invalid" : null %>"
                value="<%= locals.oldData && oldData.phone ? oldData.phone : null %>"> 
              <span class="error text-danger">
                <% if (locals.errors && errors.phone) { %>
                  <%= errors.phone.msg %>
                    <% } %>
              </span>
            </div>
          </div>
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Provincia:</b></label>
              <select 
              class="form-select localidad <%= locals.errors && errors.localidad ? "is-invalid" : null %>"
              aria-label="Default select example" 
              name="localidad">
                <option selected>Seleccione una opcion</option>

                <% if (locals.oldData && oldData.localidad) { %> 
                  <option selected> <%= oldData.localidad %>  </option>
                <% } %> 

                <% if (provincias != undefined) { %> 
                  <% provincias.forEach( provincia => { %>  
                    <option value="<%= provincia.nombre %>"><%= provincia.nombre %></option>
                  <% }) %> 
                  <% } %> 
                   
              </select>
              <span class="error text-danger">
              <% if (locals.errors && errors.localidad) { %>
                <%= errors.localidad.msg %>
                  <% } %>
                </span>    
            </div>
          </div>
           </div>

          <div class="row mb-4 ">
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Localidad:</b></label>
              <select 
              class="form-select barrio <%= locals.errors && errors.barrio ? "is-invalid" : null %>"
              aria-label="Default select example" 
              name="barrio">
                <option selected>Seleccione una opcion</option>

                <% if (locals.oldData && oldData.barrio) { %> 
                  <option selected> <%= oldData.barrio %>  </option>
                <% } %> 

              </select>
              <span class="error text-danger">
                <% if (locals.errors && errors.barrio) { %>
                  <%= errors.barrio.msg %>
                    <% } %>
              </span>  
            </div>
          </div>
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Direccion:</b></label>
              <input 
                type="text" 
                name="direccion" 
                class="form-control direccion <%= locals.errors && errors.direccion ? "is-invalid" : null %>"
                value="<%= locals.oldData && oldData.direccion ? oldData.direccion : null %>">
              <span class="error text-danger">
              <% if (locals.errors && errors.direccion) { %>
                <%= errors.direccion.msg %>
                  <% } %>
                    </span>
            </div>
          </div>
          </div>

          <div class="row mb-4 ">
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Piso:</b></label>
              <input 
              placeholder="opcional"
              type="text" 
              name="piso" 
              class="form-control piso"
              >
            </div>
          </div>
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Departamento:</b></label>
              <input 
                placeholder="opcional"
                type="text" 
                name="departamento" 
                class="form-control departamento"
                value="">
            </div>
          </div>
          </div>
          <div class="input-group mt-4 mb-4">
            <input type="file" class="form-control imagen" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04" aria-label="Upload" name="imagen">
            <button class="btn btn-danger" type="button" id="inputGroupFileAddon04">Agregar</button>
            <span class="error text-danger col-12">
              <% if (locals.errors && errors.imagen) { %>
                <%= errors.imagen.msg %>
                  <% } %>
            </span>
          </div> 
          
          <div class="row mb-4 ">

          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Contraseña</b></label>
              <input 
                type="password" 
                name="password" 
                class="form-control password <%= locals.errors && errors.password ? "is-invalid" : null %> ">
                 <span class="error text-danger">
                <% if (locals.errors && errors.password) { %>
                
                 <%= errors.password.msg %>
              
              <% } %>   
                </span>
            </div>
          </div>
          <div class="col-12 col-xl-6 mt-4">
            <div class="form-group">
              <label><b>Confirme la contraseña</b></label>
              <input 
                type="password" 
                name="passwordConfirmation" 
                class="form-control passwordConfirmation <%= locals.errors && errors.passwordConfirmation ? "is-invalid" : null %> "
                
              >
              <span class="error text-danger">
               <% if (locals.errors && errors.passwordConfirmation) { %>
                <div class="text-danger passwordConfirmationError">
                 <p> <%= errors.passwordConfirmation.msg %> </p>
                </div>
              <% } %>
            </span>
            </div>
          </div>        
      </div>
        <!-- Submit button -->
        <div class="tex-center d-flex just ">
          <button type="submit" class="btn btn-danger mb-4 mt-4">Registrate</button>
        </div>
      </div>
      </form>
        
        <!-- Register buttons -->
        <div class="text-center ">
          <p> o registrate con:</p>
          <button type="button" class="btn btn-danger btn-floating mx-1 mb-4">
            <i class="fab fa-facebook-f"></i>
          </button>
      
          <button type="button" class="btn btn-danger btn-floating mx-1 mb-4">
            <i class="fab fa-google"></i>
          </button>
      
          <button type="button" class="btn btn-danger btn-floating mx-1 mb-4">
            <i class="fab fa-twitter"></i>
          </button>
      
          <button type="button" class="btn btn-danger btn-floating mx-1 mb-4">
            <i class="fab fa-github"></i>
          </button>
        </div>
      
    </section>
    <footer class="bg-dark text-center text-white">
      <%- include ("./partials/footer.ejs")  %>
    </footer>
    <script src="/js/registerScript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
        </body>
      </html>

