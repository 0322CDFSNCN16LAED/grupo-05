<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include ("./partials/head.ejs")  %>
</head>
<body>
  <header>
    <%- include ("./partials/header-nav.ejs") %>
</header>
    <section class="w-100 p-0 m-0 prueba">
      <div class="row h100">
        <%- include ("./partials/account-header.ejs") %>

    <div class="m-center col-md-9 col-xxl-9 col-xl-9 mb-4 mt-4 ">
      <section class="container ">
          <h3>Modificar servicio</h3>
          <hr>
          <form action="/user/modify-service/<%=servicio.id%>?_method=PUT" method="POST" enctype="multipart/form-data" id="formModify">
          <div>
            <label for="profesion">Selecciona una profesion</label> 
            <select class="form-select m-center mb-4 mt-4" aria-label="Default select example" name="profesion">
              <% for (i = 0; i < categoria.length; i++) { %>
                <option  value="<%= categoria[i].id %>" >
                  <%= categoria[i].name %>
                </option> 
              <% } %>
            </select>
          </div>
          <div>
            <input type="precio" class="form-control precio <%= locals.errors && errors.precio ? "is-invalid" : null %>" id="precio" placeholder="Precio de visita" name="precio" value="<%= servicio.price  %>">
              <span class="error text-danger">
                <% if (locals.errors && errors.precio) { %>
                  <%= errors.precio.msg %>
                <% } %>
              </span>
          </div>
          <div class="input-group mt-4 mb-4">
            <input type="file" class="form-control" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04"
              aria-label="Upload" name="imagen" multiple>
            <button class="btn btn-danger" type="button" id="inputGroupFileAddon04">Agregar</button>
            <span class="error text-danger col-12">
              <% if (locals.errors && errors.imagen) { %>
                <%= errors.imagen.msg %>
              <% } %>
            </span>
          </div>
          <div class="d-flex">

            <% for (let i = 0; i < servicio.servicePhoto.length; i++) { %> 

              <div class=" mb-4 ml-3 text-center">
                <img src="/images/avatars/<%=servicio.servicePhoto[i].photo%>" class=" img-fluid  images "  alt="Hollywood Sign on The Hill"/>
              </br>
              <a class="btn btn-danger remove-buttom btn-close" href="/user/remove-image/<%=servicio.servicePhoto[i].id%>"></a>
              </div>
              
              <% } %> 

          </div>
          <div class="form-floating justify-content-center ">
            <textarea class="form-control mb-4 <%= locals.errors && errors.descripcion ? "is-invalid" : null %>" id="floatingTextarea" name="descripcion"></textarea>
            <label for="floatingTextarea">Escribe una breve descripcion...</label>
            <span class="error text-danger col-xxl-12">
              <% if (locals.errors && errors.descripcion) { %>
                
                <%= errors.descripcion.msg %>
             
             <% } %> 
            </span>
          </div>
          <div class="text-center p-15 ">
                <button type="submit" value="Modificar" class="btn btn-danger mt-4 mb-4">Modificar</button>
          </div>
          </form>
      </section>
      </div>
    </section>
    <footer class="bg-dark text-center text-white">
      <%- include ("./partials/footer.ejs")  %>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
        <script src="/js/modifyScript.js"></script>
        </body>
      </html>